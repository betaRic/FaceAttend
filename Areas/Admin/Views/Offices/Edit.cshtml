@model FaceAttend.Areas.Admin.Models.OfficeEditVm
@{
    ViewBag.Title = "Edit Office";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";

    var hasLeafletCss = System.IO.File.Exists(Server.MapPath("~/Content/vendor/leaflet/leaflet.min.css"));
    var hasLeafletJs  = System.IO.File.Exists(Server.MapPath("~/Scripts/vendor/leaflet/leaflet.min.js"));
}

@section styles {
    @if (hasLeafletCss)
    {
        <link rel="stylesheet" href="~/Content/vendor/leaflet/leaflet.min.css" />
    }
    else
    {
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    }
}

<div class="ea-page">

    <div class="ea-page-header">
        <div>
            <h1 class="ea-page-title">
                <i class="fa-solid fa-building-pen" aria-hidden="true"></i>
                Edit Office
            </h1>
            <div class="ea-page-subtitle">@Model.Name</div>
        </div>
        <div class="ea-page-actions">
            <a class="btn btn-outline-secondary btn-sm" href="@Url.Action("Index")">
                <i class="fa-solid fa-arrow-left me-1" aria-hidden="true"></i>Back
            </a>
        </div>
    </div>

    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()
        @Html.HiddenFor(m => m.Id)

        <div class="ea-form-card">
            <div class="ea-form-header">
                <div class="ea-form-title">
                    <i class="fa-solid fa-building" aria-hidden="true"></i>
                    Office Details
                </div>
            </div>
            <div class="ea-form-body">
                @Html.Partial("_OfficeForm", Model)
            </div>
            <div class="ea-form-footer">
                <button type="submit" class="btn btn-primary">
                    <i class="fa-solid fa-floppy-disk me-1" aria-hidden="true"></i>Save Changes
                </button>
                <a class="btn btn-outline-secondary" href="@Url.Action("Index")">Cancel</a>
            </div>
        </div>
    }

</div>

@section scripts {
    @if (hasLeafletJs)
    {
        <script src="~/Scripts/vendor/leaflet/leaflet.min.js"></script>
    }
    else
    {
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    }
    <script src="~/Scripts/admin-office-map.js"></script>
}
